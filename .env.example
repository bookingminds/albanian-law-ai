# ================================================================
# Albanian Law AI — Environment Variables
# Copy this file to .env and fill in your values
# ================================================================

# ── REQUIRED ──────────────────────────────────────────────────

# OpenAI API Key (get from https://platform.openai.com/api-keys)
OPENAI_API_KEY=

# JWT secret — generate with: python -c "import secrets; print(secrets.token_hex(64))"
JWT_SECRET=

# Supabase Auth (get from Supabase Dashboard > Settings > API)
SUPABASE_URL=
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

# Server URL — auto-detected from RAILWAY_PUBLIC_DOMAIN if not set
SERVER_URL=http://localhost:8000
FRONTEND_URL=http://localhost:8000
# Custom domain (e.g. albanianlaw.al) — added to CORS automatically
CUSTOM_DOMAIN=

# ── OPTIONAL (safe defaults) ─────────────────────────────────

# Models
LLM_MODEL=gpt-4o-mini
EMBEDDING_MODEL=text-embedding-3-small

# Chunking
CHUNK_SIZE=900
CHUNK_OVERLAP=150

# RAG retrieval
TOP_K_RESULTS=10
SIMILARITY_THRESHOLD=0.55
CONFIDENCE_MIN_SIMILARITY=0.35

# Hybrid search
HYBRID_VECTOR_WEIGHT=0.6
HYBRID_KEYWORD_WEIGHT=0.4
HYBRID_FETCH_K=40
HYBRID_FINAL_K=8

# Multi-query search
MQ_FETCH_K=150
MQ_FINAL_K=40
MQ_STITCH_WINDOW=2
MQ_COVERAGE_MAX_PASSES=3
MQ_COVERAGE_EXTRA_K=10

# Caching
EMBEDDING_CACHE_SIZE=512
SEARCH_CACHE_TTL=300

# Auth
JWT_ALGORITHM=HS256
JWT_EXPIRE_DAYS=7
ADMIN_EMAIL=

# Free trial
TRIAL_DAYS=1
MAX_SIGNUPS_PER_IP_24H=5
BLOCK_DISPOSABLE_EMAILS=true

# Google Play Billing
GOOGLE_PLAY_PACKAGE_NAME=com.zagrid.albanianlawai
GOOGLE_PLAY_PRODUCT_ID=law_ai_monthly
SUBSCRIPTION_PRICE_EUR=4.99

# Google Play server-side verification (optional — path to service account JSON)
# GOOGLE_PLAY_SERVICE_ACCOUNT_JSON=/app/google-play-credentials.json

# ── PAYPAL (web payments — one-time 30-day premium) ──────────
# Get from https://developer.paypal.com → My Apps & Credentials
PAYPAL_CLIENT_ID=
PAYPAL_CLIENT_SECRET=
# Webhook ID — create at PayPal Developer → Webhooks → copy the Webhook ID
# Required event: PAYMENT.CAPTURE.COMPLETED
PAYPAL_WEBHOOK_ID=
# Set to true for sandbox testing, false for production
PAYPAL_SANDBOX=true

# ── DATABASE (Railway PostgreSQL) ─────────────────────────────
# Auto-set by Railway when you add a PostgreSQL addon
DATABASE_URL=

# ── PERSISTENT STORAGE ────────────────────────────────────────
# Set to /data on Railway (points to Railway Volume for ChromaDB persistence)
DATA_DIR=/data
